<html>
<head>
<link href="ihpsc.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$','$']]}
  });
  MathJax.Hub.Config({
    TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
  </script>

  <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>

<script type="application/javascript">
  // First we declare some metadata, primarily to describe
  // the container environment.
  var ccrsApiNamespace = "org.xsede.jobrunner.model.ModelApi";
  var mpiExampleMetaJson = {
    // CHANGE: for now, leave the appended string as .SysJobMetaData;
    //         other options will be supported in the future
    "$type": ccrsApiNamespace + ".SysJobMetaData",
    // CHANGE: shell to use implicitly when running commands in the container
    "shell": ["bash"],
    // CHANGE: should currently be one of: .NixOS, .Singularity
    "containerType": {
      "$type":  ccrsApiNamespace + ".NixOS"
    },
    // CHANGE: Specify for NixOS for all jobs, or for Singularity when resuming existing jobs
    "containerId": ["vicOpenMPI"],
    // CHANGE: Specify the singularity image name
    "image": [],
    // Directories on the host to mount in the container, if any:
    "binds": [],
    // Only for singularity:
    "overlay": [],
    // CHANGE: should be filled in dynamically to contain the (student) user,
    //         but this is a demo, so we use a static user name:
    "user": "test0",
    "address": [],
    "hostname": [],
    "url": window.location.href
  };
  var mpiExampleMeta = CCRS.sysJobMetaData(mpiExampleMetaJson);
</script>

<div class="container">
  <div class="row">
    <div class="col-12">
      <div class="pagehead">
        <h1>MPI Review</h1>
        <h5>Experimental html version of downloadable textbook, see http://www.tacc.utexas.edu/~eijkhout/istc/istc.html</h5>
      </div>
    </div>
  </div>
  <div>


\[
\newcommand\inv{^{-1}}\newcommand\invt{^{-t}}
\newcommand\bbP{\mathbb{P}}
\newcommand\bbR{\mathbb{R}}
\newcommand\defined{
  \mathrel{\lower 5pt \hbox{${\equiv\atop\mathrm{\scriptstyle D}}$}}}
\]


14.1 : <a href="mpireview.html#Conceptual">Conceptual</a><br>
14.2 : <a href="mpireview.html#Communicators">Communicators</a><br>
14.3 : <a href="mpireview.html#Point-to-point">Point-to-point</a><br>
14.4 : <a href="mpireview.html#Collectives">Collectives</a><br>
14.5 : <a href="mpireview.html#Datatypes">Datatypes</a><br>
14.6 : <a href="mpireview.html#Theory">Theory</a><br>
<a href="index.html">Back to Table of Contents</a>
<h1>14 MPI Review</h1>
<p name="switchToTextMode">
For all true/false questions, if you answer that a statement is false, give a one-line explanation.
</p>

<h1><a id="Conceptual">14.1</a> Conceptual</h1>
crumb trail:  > <a href="mpireview.html">mpireview</a> > <a href="mpireview.html#Conceptual">Conceptual</a>
<exercise>
<b>Exercise</b>
<a id="14.1">14.1</a>
<p name="exercise">
<p name="switchToTextMode">
True or false: 
<tt>mpicc</tt>
 is a compiler.
</p name="exercise">
</exercise>
<answer>


</answer>
<exercise>
<b>Exercise</b>
<a id="14.2">14.2</a>
<p name="exercise">
<p name="switchToTextMode">
What is the function of a hostfile?
</p name="exercise">
</exercise>
<answer>


</answer>
<p name="switchToTextMode">
\begin{pcse}
</p>
<exercise>
<b>Exercise</b>
<a id="14.3">14.3</a>
<p name="exercise">
<p name="switchToTextMode">
An architecture is called `symmetric' or `uniform' if the
relation between any pair of processes is essentially the same.
In what way are MPI processes run on stampede symmetric; in what way
not?
</p name="exercise">
</exercise>
<answer>


</answer>
<p name="switchToTextMode">
\end{pcse}
</p>

<h1><a id="Communicators">14.2</a> Communicators</h1>
crumb trail:  > <a href="mpireview.html">mpireview</a> > <a href="mpireview.html#Communicators">Communicators</a>
<enumerate>
<ol>
<li>
<p>
True or false: in each communicator, processes are numbered consecutively from zero.
<answer>


</answer>
<li>
If a process is in two communicators, it has the same rank in
both.
<answer>


</answer>
</p>

</ol>
</enumerate>
<h1><a id="Point-to-point">14.3</a> Point-to-point</h1>
crumb trail:  > <a href="mpireview.html">mpireview</a> > <a href="mpireview.html#Point-to-point">Point-to-point</a>
<enumerate>
<ol>
<li>
<p>
Describe a deadlock scenario involving three processors.
<answer>


</answer>
</p>

<li>
<p>
True or false: a message sent with 
<tt>MPI_Isend</tt>
 from one processor can be
received with an 
<tt>MPI_Recv</tt>
 call on another processor.
<answer>


</answer>
</p>

<li>
<p>
True or false: a message sent with 
<tt>MPI_Send</tt>
 from one processor can be
received with an 
<tt>MPI_Irecv</tt>
 on another processor.
<answer>


</answer>
</p>

<li>
<p>
Why does the 
<tt>MPI_Irecv</tt>
 call not have an 
<tt>MPI_Status</tt>
 argument?
<answer>


</answer>
</p>

<li>
<p>
What is the relation between the concepts of `origin', `target', `fence',
and `window' in one-sided communication.
<answer>


</answer>
</p>

<li>
<p>
What are the three routines for one-sided data transfer?
<answer>


</answer>
</p>

<p name="switchToTextMode">
style=reviewcode,
language=C,
}
</p>

</ol>
</enumerate>
<p name="switchToTextMode">
assume that all buffers have been
allocated with sufficient size. For each fragment note whether it
deadlocks or not. Discuss performance issues.
</p>

<p name="switchToTextMode">
\lstinputlisting{qblock1}
\lstinputlisting{qblock2}
\lstinputlisting{qblock3}
\lstinputlisting{qblock4}
\lstinputlisting{qblock5}
</p>

<p name="switchToTextMode">
\pagebreak
Fortran codes:
</p>

<p name="switchToTextMode">
\lstinputlisting{qblock1f}
\lstinputlisting{qblock2f}
\lstinputlisting{qblock3f}
\lstinputlisting{qblock4f}
\lstinputlisting{qblock5f}
</p>

<p name="switchToTextMode">
\end{enumerate}
</p>

<h1><a id="Collectives">14.4</a> Collectives</h1>
crumb trail:  > <a href="mpireview.html">mpireview</a> > <a href="mpireview.html#Collectives">Collectives</a>
<enumerate>
<ol>
<li>
<p>
MPI collectives can be divided into (a) rooted vs rootless (b) using uniform
buffer lengths vs variable length buffers (c) blocking vs non-blocking. Give examples of
each type.
</p>

<li>
<p>
True or false: an 
<tt>MPI_Scatter</tt>
 call puts the same data on
each process.
</p>

<li>
<p>
Given a distributed array, with every processor storing
</p>
<lstlisting>
<pre>
double x[N]; // N can vary per processor
</pre>
</lstlisting>
<p name="switchToTextMode">
give the approximate MPI-based code that computes the maximum value
in the array, and leaves the result on every processor.
<answer>


</answer>
</p>

<li>
<p>
With data as in the previous question, given the code for
normalizing the array.
</ol>
</enumerate>
<h1><a id="Datatypes">14.5</a> Datatypes</h1>
crumb trail:  > <a href="mpireview.html">mpireview</a> > <a href="mpireview.html#Datatypes">Datatypes</a>
<enumerate>
<ol>
<li>
<p>
Give two examples of MPI derived datatypes. What parameters are used
to describe them?
<answer>


</answer>
</p>

<li>
<p>
Give a practical example where the sender uses a different type to send
than the receiver uses in the corresponding receive call. Name the types involved.
<answer>


</answer>
</p>

</ol>
</enumerate>
<h1><a id="Theory">14.6</a> Theory</h1>
crumb trail:  > <a href="mpireview.html">mpireview</a> > <a href="mpireview.html#Theory">Theory</a>
<enumerate>
<ol>
<li>
<p>
Give a simple model for the time a send operation takes.
<answer>


</answer>
</p>

<li>
<p>
Give a simple model for the time a broadcast of a single scalar takes.
<answer>


</answer>
</p>

</ol>
</enumerate>
</div>
<a href="index.html">Back to Table of Contents</a>
